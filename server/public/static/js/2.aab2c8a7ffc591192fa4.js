webpackJsonp([2,8],{113:function(t,e,a){e=t.exports=a(3)(),e.push([t.id,"","",{version:3,sources:[],names:[],mappings:"",file:"Main.vue",sourceRoot:"webpack://"}])},120:function(t,e,a){e=t.exports=a(3)(),e.push([t.id,"","",{version:3,sources:[],names:[],mappings:"",file:"Form.vue",sourceRoot:"webpack://"}])},133:function(t,e,a){e=t.exports=a(3)(),e.push([t.id,"","",{version:3,sources:[],names:[],mappings:"",file:"Tasks.vue",sourceRoot:"webpack://"}])},134:function(t,e,a){e=t.exports=a(3)(),e.push([t.id,"","",{version:3,sources:[],names:[],mappings:"",file:"TasksForm.vue",sourceRoot:"webpack://"}])},148:function(t,e,a){var s=a(113);"string"==typeof s&&(s=[[t.id,s,""]]);a(4)(s,{});s.locals&&(t.exports=s.locals)},155:function(t,e,a){var s=a(120);"string"==typeof s&&(s=[[t.id,s,""]]);a(4)(s,{});s.locals&&(t.exports=s.locals)},169:function(t,e,a){var s=a(133);"string"==typeof s&&(s=[[t.id,s,""]]);a(4)(s,{});s.locals&&(t.exports=s.locals)},170:function(t,e,a){var s=a(134);"string"==typeof s&&(s=[[t.id,s,""]]);a(4)(s,{});s.locals&&(t.exports=s.locals)},213:function(t,e,a){var s,n;a(155),s=a(339);var i=a(242);n=s=s||{},"object"!=typeof s.default&&"function"!=typeof s.default||(n=s=s.default),"function"==typeof n&&(n=n.options),n.render=i.render,n.staticRenderFns=i.staticRenderFns,t.exports=s},214:function(t,e,a){var s,n;a(148),s=a(340);var i=a(234);n=s=s||{},"object"!=typeof s.default&&"function"!=typeof s.default||(n=s=s.default),"function"==typeof n&&(n=n.options),n.render=i.render,n.staticRenderFns=i.staticRenderFns,t.exports=s},215:function(t,e,a){var s,n;a(169),s=a(341);var i=a(257);n=s=s||{},"object"!=typeof s.default&&"function"!=typeof s.default||(n=s=s.default),"function"==typeof n&&(n=n.options),n.render=i.render,n.staticRenderFns=i.staticRenderFns,t.exports=s},216:function(t,e,a){var s,n;a(170),s=a(342);var i=a(258);n=s=s||{},"object"!=typeof s.default&&"function"!=typeof s.default||(n=s=s.default),"function"==typeof n&&(n=n.options),n.render=i.render,n.staticRenderFns=i.staticRenderFns,t.exports=s},234:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{attrs:{id:"list"}},[a("h3",[t._v("所有项目")]),t._v(" "),a("a",{staticClass:"btn btn-primary",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.addNew()}}},[a("i",{staticClass:"fa fa-plus"}),t._v("添加新项目\n    ")]),t._v(" "),a("span",{staticClass:"dropdown",class:{open:t.addMore}},[a("a",{staticClass:"btn btn-default",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.clickAddMore()}}},[a("i",{staticClass:"fa fa-arrow-down"}),t._v("其余功能\n      ")]),t._v(" "),a("ul",{staticClass:"dropdown-menu"},[a("li",[a("a",{attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.newManager(e)}}},[t._v("添加项目负责人")])])])]),t._v(" "),a("div",{staticClass:"table-content"},[a("table",{staticClass:"table table-striped"},[t._m(0),t._v(" "),a("tbody",t._l(t.projects,function(e){return a("tr",[a("td",[t._v(t._s(e.id))]),t._v(" "),a("td",[t._v(t._s(e.name))]),t._v(" "),a("td",[t._v(t._s(e.manager))]),t._v(" "),a("td",[a("div",{staticClass:"btn-group btn-group-sm"},[a("button",{staticClass:"btn btn-primary",on:{click:function(a){a.preventDefault(),t.tasks(e)}}},[a("i",{staticClass:"fa fa-eye"})]),t._v(" "),a("button",{staticClass:"btn btn-default",on:{click:function(a){a.preventDefault(),t.editProject(e)}}},[a("i",{staticClass:"fa fa-edit"})]),t._v(" "),a("button",{staticClass:"btn btn-danger",on:{click:function(a){a.preventDefault(),t.askRemoveProject(e)}}},[a("i",{staticClass:"fa fa-times"})])])])])}))]),t._v(" "),a("pagination",{attrs:{paginationData:t.pagination,currentPage:t.currentPage,maxItems:t.pagination.total}})],1)]),t._v(" "),a("div",{staticClass:"modal fade",attrs:{id:"managersForm",tabindex:"-1",role:"dialog"}},[a("div",{staticClass:"modal-dialog modal-md"},[a("div",{staticClass:"modal-content"},[a("table",{staticClass:"table"},[t._m(1),t._v(" "),a("tbody",[t._l(t.managers,function(e){return a("tr",[a("td",[t._v(t._s(e.name))]),t._v(" "),a("td",[a("a",{staticClass:"btn btn-sm btn-default",attrs:{href:"#"},on:{click:function(a){t.editManager(e)}}},[a("i",{staticClass:"fa fa-edit"})]),t._v(" "),a("a",{staticClass:"btn btn-sm btn-warning",attrs:{href:"#"},on:{click:function(a){t.deleteManager(e)}}},[a("i",{staticClass:"fa fa-delete"})])])])}),t._v(" "),a("tr",[a("form",{on:{submit:function(e){e.preventDefault(),t.addNewManager()}}},[a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.manager.name,expression:"manager.name"}],staticClass:"form-control",attrs:{type:"text",placeholder:"姓名"},domProps:{value:t._s(t.manager.name)},on:{input:function(e){e.target.composing||(t.manager.name=e.target.value)}}})]),t._v(" "),a("td",[a("button",{staticClass:"btn btn-primary",on:{click:function(e){e.preventDefault(),t.addNewManager(e)}}},[t._v("c")])])])])],2)])])])]),t._v(" "),a("div",{attrs:{id:"main"}},[a("router-view")],1)])},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("ID")]),a("th",[t._v("名称")]),a("th",[t._v("负责人")]),a("th",[t._v("操作")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("姓名")]),a("th",[t._v("操作")])])])}]}},242:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("h1",[t._v(t._s(t.formTitle))])])]),t._v(" "),a("div",{staticClass:"divider"}),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-10 col-sm-offset-1"},[a("form",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-6"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"control-label",attrs:{for:"name"}},[t._v("项目名称")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.name,expression:"form.name"}],staticClass:"form-control",attrs:{type:"text",id:"name"},domProps:{value:t._s(t.form.name)},on:{input:function(e){e.target.composing||(t.form.name=e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"col-sm-6"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"control-label",attrs:{for:"manager"}},[t._v("负责人")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.form.manager,expression:"form.manager"}],staticClass:"form-control",attrs:{id:"manager"},on:{change:function(e){t.form.manager=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e})[0]}}},[a("option",{attrs:{label:"其他",value:"0"},domProps:{value:"0"}}),t._v(" "),a("option",{attrs:{label:"李少川",value:"1"},domProps:{value:"1"}}),t._v(" "),a("option",{attrs:{label:"周袁杰",value:"2"},domProps:{value:"2"}})])])])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-4 col-sm-offset-4"},[a("button",{staticClass:"btn btn-primary btn-block",on:{click:function(e){e.preventDefault(),t.submit()}}},[t._v("保存")])])])])])])])},staticRenderFns:[]}},257:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"main"}},[a("div",{staticClass:"row"},[t._m(0),t._v(" "),a("div",{staticClass:"col-md-6 text-right"},[a("div",{staticClass:"button-within-header"},[a("a",{directives:[{name:"show",rawName:"v-show",value:!t.isFormVisible,expression:"!isFormVisible"}],staticClass:"btn btn-default btn-sm",attrs:{href:"#"},on:{click:t.create}},[a("i",{staticClass:"fa fa-plus"})]),t._v(" "),a("a",{directives:[{name:"show",rawName:"v-show",value:t.isFormVisible,expression:"isFormVisible"}],staticClass:"btn btn-default btn-sm",attrs:{href:"#"},on:{click:t.hide}},[a("i",{staticClass:"fa fa-minus"})])])])]),t._v(" "),a("div",{staticClass:"divider"}),t._v(" "),a("transition",{attrs:{name:"fade"}},[a("router-view")],1),t._v(" "),a("div",{staticClass:"table-content"},[a("table",{staticClass:"table table-striped"},[t._m(1),t._v(" "),a("tbody",t._l(t.tasks,function(e){return a("tr",[a("td",{attrs:{width:"140"}},[a("a",{directives:[{name:"show",rawName:"v-show",value:!e.pushed,expression:"!task.pushed"}],staticClass:"btn btn-block btn-sm btn-info",attrs:{href:"#"},on:{click:function(a){t.pushToExperiment(e)}}},[a("i",{staticClass:"fa fa-send"})]),t._v(" "),a("p",{directives:[{name:"show",rawName:"v-show",value:e.pushed,expression:"task.pushed"}]},[t._v("已进入实验流程")])]),t._v(" "),a("td",[t._v(t._s(e.name))]),t._v(" "),a("td",[t._v(t._s(e.pipeline_id))]),t._v(" "),a("td",[a("a",{staticClass:"btn btn-default btn-sm",attrs:{href:"#"},on:{click:function(a){t.editTask(e)}}},[a("i",{staticClass:"fa fa-edit"})]),t._v(" "),a("a",{staticClass:"btn btn-danger btn-sm",attrs:{href:"#"},on:{click:function(a){t.askRemoveTask(e)}}},[a("i",{staticClass:"fa fa-times"})])])])}))])]),t._v(" "),a("pagination",{attrs:{paginationData:t.pagination,currentPage:t.currentPage,maxItems:t.pagination.total}})],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-6"},[a("h1",[t._v("该批次样品管理")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("提交给实验处理")]),a("th",[t._v("任务名称")]),a("th",[t._v("技术路线")]),a("th",[t._v("操作")])])])}]}},258:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("form",{staticClass:"well"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-6"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"control-label",attrs:{for:"name"}},[t._v("任务名称")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.name,expression:"form.name"}],staticClass:"form-control",attrs:{type:"text",id:"name"},domProps:{value:t._s(t.form.name)},on:{input:function(e){e.target.composing||(t.form.name=e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"col-sm-6"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"control-label",attrs:{for:"pipeline_id"}},[t._v("技术路线")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.form.pipeline_id,expression:"form.pipeline_id"}],staticClass:"form-control",attrs:{id:"pipeline_id"},on:{change:function(e){t.form.pipeline_id=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e})[0]}}},[a("option",{attrs:{label:"其他",value:"0"},domProps:{value:"0"}}),t._v(" "),a("option",{attrs:{label:"16S",value:"1"},domProps:{value:"1"}}),t._v(" "),a("option",{attrs:{label:"WGS",value:"2"},domProps:{value:"2"}})])])])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-6"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"control-label",attrs:{for:"name"}},[t._v("实验负责人")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.form.exp_manager,expression:"form.exp_manager"}],staticClass:"form-control",attrs:{id:"exp_manager"},on:{change:function(e){t.form.exp_manager=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e})[0]}}},[a("option",{attrs:{label:"待定",value:"0"},domProps:{value:"0"}}),t._v(" "),a("option",{attrs:{label:"杨仁涛",value:"1"},domProps:{value:"1"}})])])]),t._v(" "),a("div",{staticClass:"col-sm-6"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"control-label",attrs:{for:"name"}},[t._v("信息负责人")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.form.info_manager,expression:"form.info_manager"}],staticClass:"form-control",attrs:{id:"info_manager"},on:{change:function(e){t.form.info_manager=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e})[0]}}},[a("option",{attrs:{label:"待定",value:"0"},domProps:{value:"0"}}),t._v(" "),a("option",{attrs:{label:"苏丽丽",value:"1"},domProps:{value:"1"}}),t._v(" "),a("option",{attrs:{label:"刘光",value:"1"},domProps:{value:"1"}})])])])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-6"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"control-label",attrs:{for:"start_time"}},[t._v("开始时间")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.start_time,expression:"form.start_time"}],staticClass:"form-control",attrs:{type:"date",id:"start_time"},domProps:{value:t._s(t.form.start_time)},on:{input:function(e){e.target.composing||(t.form.start_time=e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"col-sm-6"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"control-label",attrs:{for:"end_time"}},[t._v("截止时间")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.end_time,expression:"form.end_time"}],staticClass:"form-control",attrs:{type:"date",id:"end_time"},domProps:{value:t._s(t.form.end_time)},on:{input:function(e){e.target.composing||(t.form.end_time=e.target.value)}}})])])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-5"},[a("table",{staticClass:"table table-striped"},[t._m(0),t._v(" "),a("tbody",t._l(t.batches,function(e){return a("tr",[a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.batchesSelection,expression:"form.batchesSelection"}],attrs:{type:"checkbox"},domProps:{value:e,checked:Array.isArray(t.form.batchesSelection)?t._i(t.form.batchesSelection,e)>-1:t.form.batchesSelection},on:{change:function(a){var s=t.form.batchesSelection,n=a.target,i=!!n.checked;if(Array.isArray(s)){var r=e,o=t._i(s,r);i?o<0&&(t.form.batchesSelection=s.concat(r)):o>-1&&(t.form.batchesSelection=s.slice(0,o).concat(s.slice(o+1)))}else t.form.batchesSelection=i}}})]),t._v(" "),a("td",[t._v("\n                "+t._s(e.client_id)+"\n              ")]),t._v(" "),a("td",[t._v("\n                "+t._s(e.send_time)+"\n              ")]),t._v(" "),a("td",[t._v("\n                "+t._s(e.arrive_time)+"\n              ")])])}))])]),t._v(" "),t._m(1),t._v(" "),a("div",{staticClass:"col-sm-5"},[a("table",{staticClass:"table table-striped"},[t._m(2),t._v(" "),a("tbody",t._l(t.form.batchesSelection,function(e){return a("tr",[a("td",[t._v("\n                "+t._s(e.client_id)+"\n              ")]),t._v(" "),a("td",[t._v("\n                "+t._s(e.send_time)+"\n              ")]),t._v(" "),a("td",[t._v("\n                "+t._s(e.arrive_time)+"\n              ")])])}))])])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-4 col-sm-offset-4"},[a("a",{staticClass:"btn btn-primary full-width",attrs:{href:"#"},on:{click:t.submit}},[t._v("保存")])])])])])},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th"),t._v(" "),a("th",[t._v("样品编号")]),t._v(" "),a("th",[t._v("寄送时间")]),t._v(" "),a("th",[t._v("到样时间")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-sm-2 text-center",staticStyle:{"padding-top":"2em",color:"#3097D1"}},[a("i",{staticClass:"fa fa-exchange fa-2x"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("样品编号")]),t._v(" "),a("th",[t._v("寄送时间")]),t._v(" "),a("th",[t._v("到样时间")])])])}]}},339:function(t,e,a){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var n=a(1),i=s(n),r=a(9),o=s(r),c=a(11),l=a(2);e.default={data:function(){return{form:{id:0,name:"",manager:0}}},watch:(0,o.default)({$route:"fetch"},"$route","reset"),mounted:function(){this.fetch()},computed:{isEditing:function(){return this.form.id>0},isValid:function(){return!0},formTitle:function(){return this.form.id>0?"修改项目信息":"新增项目"}},methods:(0,i.default)({},(0,l.mapActions)(["setFetching","resetMessages","setMessage"]),{fetch:function(){var t=this,e=this.$route.params.id;void 0!==e&&(this.setFetching({fetching:!0}),this.$http.get("projects/"+e).then(function(e){var a=e.data,s=a.data;t.form=(0,i.default)({},s),t.setFetching({fetching:!1})}))},submit:function(){console.log("sub"),this.isValid&&(this.setFetching({fetching:!0}),this.isEditing?this.update():this.save())},save:function(){var t=this;this.$http.post("projects",(0,c.pick)(this.form,["name","manager"])).then(function(){t.$bus.$emit("projects.created"),t.setFetching({fetching:!1}),t.setMessage({type:"success",message:"新项目录入成功"}),t.reset()})},update:function(){var t=this;this.$http.put("projects/"+this.form.id,this.form).then(function(){t.$bus.$emit("projects.updated"),t.setMessage({type:"success",message:"项目信息更新成功"}),t.reset()})},reset:function(){this.form.name="",this.form.manager=0}})}},340:function(t,e,a){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var n=a(1),i=s(n),r=a(2);e.default={data:function(){return{manager:{name:""},location:{name:""},addMore:!1}},mounted:function(){var t=this;this.$bus.$on("navigate",function(e){return t.navigate(e)}),this.$bus.$on("projects.created",function(){return t.fetchProjects()}),this.$bus.$on("projects.updated",function(){return t.fetchProjects()}),this.fetchProjects()},beforeRouterLeave:function(t,e,a){this.$bus.$off("projects.created"),this.$bus.$off("projects.updated"),a()},computed:(0,i.default)({},(0,r.mapState)({projects:function(t){return t.Projects.projects},projects_pagination:function(t){return t.Projects.projects_pagination},managers:function(t){return t.Projects.managers}}),{currentPage:function(){return parseInt(this.$route.query.page,10)||1},pagination:function(){return this.projects_pagination}}),watch:{currentPage:"fetchBatches"},methods:(0,i.default)({},(0,r.mapActions)(["projectsSetData","managersSetData","locationsSetData"]),{fetchProjects:function(){var t=this;this.$http.get("projects?page="+this.currentPage).then(function(e){var a=e.data;t.projectsSetData({projects:a.data,projects_pagination:a.meta.pagination})})},fetchManagers:function(){var t=this;this.$http.get("managers").then(function(e){var a=e.data;t.managersSetData({managers:a.data})})},clickAddMore:function(){this.addMore=!this.addMore},addNew:function(){this.$router.push({name:"projects.new",query:{page:this.currentPage}})},tasks:function(t){var e=t.id;this.$router.push({name:"project.tasks.index",params:{id:e}})},editProject:function(t){var e=t.id;this.$router.push({name:"projects.edit",params:{id:e}})},askRemoveProject:function(t){var e=this;swal({title:"确定吗？",text:"项目"+t.id+"将会被删除",type:"warning",showCancelButton:!0,confirmButtonColor:"#dd6b55",confirmButtonText:"确定",closeOnConfirm:!1},function(){return e.deleteProject(t)})},deleteProject:function(t){this.$http.delete("projects/"+t.id).then(function(){swal("完成","项目删除成功","success")})},newManager:function(){this.fetchManagers(),this.clickAddMore(),$("#managersForm").modal("show")},addNewManager:function(){},editManager:function(t){},deleteManager:function(t){},navigate:function(t){this.$router.push({name:"batches.index",query:{page:t.page}})}})}},341:function(t,e,a){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var n=a(1),i=s(n),r=a(2);e.default={data:function(){return{addMore:!1}},mounted:function(){var t=this;this.$bus.$on("navigate",function(e){return t.navigate(e)}),this.$bus.$on("tasks.created",function(){return t.fetchTasks()}),this.$bus.$on("tasks.updated",function(){return t.fetchTasks()}),this.fetchTasks()},computed:(0,i.default)({},(0,r.mapState)({tasks:function(t){return t.Projects.tasks},tasks_pagination:function(t){return t.Projects.tasks_pagination}}),{currentPage:function(){return parseInt(this.$route.query.page,10)||1},pagination:function(){return this.tasks_pagination},isFormVisible:function(){return"project.tasks.new"===this.$route.name||"project.tasks.edit"===this.$route.name},project_id:function(){return this.$route.params.id}}),watch:{currentPage:"fetchTasks",$route:"fetchTasks"},beforeRouterLeave:function(t,e,a){this.$bus.$off("tasks.created"),this.$bus.$off("tasks.updated"),a()},methods:(0,i.default)({},(0,r.mapActions)(["tasksSetData","recipientsSetData","locationsSetData","setFetching","setMessage"]),{fetchTasks:function(){var t=this;this.setFetching({fetching:!0}),this.$http.get("projects/"+this.project_id+"/tasks?page="+this.currentPage).then(function(e){var a=e.data;t.tasksSetData({tasks:a.data,tasks_pagination:a.meta.pagination}),t.setFetching({fetching:!1})})},clickAddMore:function(){this.addMore=!this.addMore},pushToExperiment:function(t){var e=this;swal({title:"确定吗？",text:"任务"+t.name+"将会被添加到实验线",type:"info",showCancelButton:!0,confirmButtonColor:"#3097D1",confirmButtonText:"确定",closeOnConfirm:!1},function(){return e.confirmPush(t)})},confirmPush:function(t){var e=this,a=t.id;this.$http.patch("tasks/"+a+"/push").then(function(){swal("完成","任务添加到实验线成功","success"),e.fecthTasks()})},create:function(){this.$router.push({name:"project.tasks.new",query:{page:this.currentPage}})},hide:function(){this.$router.push({name:"project.tasks.index",query:{page:this.currentPage}})},editTask:function(t){var e=t.id;this.$router.push({name:"project.tasks.edit",params:{task_id:e}})},askRemoveTask:function(t){var e=this;swal({title:"确定吗？",text:"样品"+t.id+"将会被删除",type:"warning",showCancelButton:!0,confirmButtonColor:"#dd6b55",confirmButtonText:"确定",closeOnConfirm:!1},function(){return e.deleteTask(t)})},deleteTask:function(t){var e=this;this.$http.delete("tasks/"+t.id).then(function(){swal("完成","样品删除成功","success"),e.fetchTasks()})},navigate:function(t){this.$router.push({name:"tasks.index",query:{page:t.page}})}})}},342:function(t,e,a){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var n=a(1),i=s(n),r=a(2);e.default={data:function(){return{form:{id:0,name:"",project_id:this.$route.params.id,pipeline_id:0,exp_manager:0,info_manager:0,start_time:"",end_time:"",batchesSelection:[]}}},computed:(0,i.default)({},(0,r.mapState)({batches:function(t){return t.Batches.batches}}),{isEditing:function(){return this.form.id>0},isValid:function(){return!0},showCreateForm:function(){return"project.tasks.new"===this.$route.name}}),mounted:function(){this.fetch()},watch:{$route:"fetch"},methods:(0,i.default)({},(0,r.mapActions)(["batchesSetData","setFetching","resetMessages","setMessage"]),{fetch:function(){var t=this,e=this.$route.params.task_id;void 0!==e&&(this.setFetching({fetching:!0}),this.$http.get("tasks/"+e).then(function(e){var a=e.data;t.form=(0,i.default)({},a.data),console.log(t.form)})),this.$http.get("batches/unsign").then(function(e){var a=e.data;t.batchesSetData({batches:a.data})})},submit:function(){this.isValid&&(this.isEditing?this.update():this.save())},update:function(){var t=this;this.$http.put("tasks/"+this.form.id,this.form).then(function(){t.$bus.$emit("tasks.updated"),t.setFetching({fetching:!1}),t.setMessage({type:"success",message:"样品更新成功"}),t.reset()})},save:function(){var t=this;this.$http.post("tasks",this.form).then(function(){t.$bus.$emit("tasks.created"),t.setFetching({fetching:!1}),t.setMessage({type:"success",message:"样品添加成功"}),t.reset()})},reset:function(){this.form.id=0,this.form.name="",this.form.project_id=this.$route.params.id,this.form.pipeline_id=0,this.form.exp_manager=0,this.form.info_manager=0,this.form.start_time="",this.form.end_time="",this.form.batchesSelection=[]}})}}});
//# sourceMappingURL=2.aab2c8a7ffc591192fa4.js.map